<div class="page-container">
  <div class="main-content">

    <header class="welcome-header">
      <h1>¡Hola, {{ username }}!</h1>
      <p>¿Listo para tu próxima aventura en bicicleta?</p>
    </header>

    <section class="stats-grid">
      <div class="stat-card">
        <div class="stats-label">Has recorrido</div>
        <div class="stat-value">{{ distanceTraveled }} km</div>
      </div>
      <div class="stat-card">
        <div class="stats-label">Alquileres realizados</div>
        <div class="stat-value">{{ rentalsCount }}</div>
      </div>
      <div class="stat-card">
        <div class="stats-label">Tiempo de manejo</div>
        <div class="stat-value">{{ drivingTime }} h</div>
      </div>
      <div class="stat-card">
        <div class="stats-label">Tu rating como arrendatario</div>
        <div class="stat-value rating-display">
          &#9733;&#9733;&#9733;&#9733;&#9733;
          <span class="rating-number">{{ rating }}</span>
        </div>
      </div>
    </section>

    <section class="next-reservation">
      <h2>Tu próxima reserva</h2>
      <div class="card reservation-card">
        <div class="reservation-info">
          <p class="bike-name">{{ upcoming.bike }}</p>
          <p>{{ upcoming.date }} – {{ upcoming.time }}</p>
          <p>{{ upcoming.address }}</p>
        </div>
        <div class="reservation-image">
          <img [src]="upcoming.imageUrl" alt="{{ upcoming.bike }}">
        </div>
        <div class="reservation-actions">
          <button class="btn btn-details" (click)="viewDetails()">Ver detalles</button>
          <button class="btn btn-cancel"  (click)="cancelReservation()">Cancelar reserva</button>
        </div>
      </div>
    </section>

    <section class="recent-rentals">
      <h2>Reservas Recientes</h2>
      <div class="card recent-rentals-card">
        <div class="rentals-header">
          <span>Bicicleta</span>
          <span>Fecha</span>
          <span>Estación inicio</span>
          <span>Estación final</span>
          <span>Estado</span>
        </div>
        <div class="rental-item" *ngFor="let r of recentRentals">
          <span>{{ r.bike }}</span>
          <span>{{ r.date }}</span>
          <span>{{ r.startStation }}</span>
          <span>{{ r.endStation }}</span>
          <span>
            <span class="status-badge"
                  [ngClass]="{
                    'status-finalizado': r.status==='Finalizado',
                    'status-cancelada': r.status==='Cancelada'
                  }">
              {{ r.status }}
            </span>
          </span>
        </div>
      </div>
    </section>

  </div>

  <aside class="sidebar">
    <h2>Recomendaciones</h2>
    <div class="card recommendations-card">
      <div class="recommendation-item" *ngFor="let rec of recommendations">
        <img class="rec-image" [src]="rec.imageUrl" alt="{{ rec.bike }}">
        <div class="rec-info">
          <span class="rec-name">{{ rec.bike }}</span><br>
          <span class="rec-details">S/ {{ rec.pricePerHour.toFixed(2) }}/h – {{ rec.distance }}</span>
        </div>
        <button class="btn btn-reserve" (click)="reserveAgain(rec)">Reservar</button>
      </div>
    </div>
  </aside>
</div>
